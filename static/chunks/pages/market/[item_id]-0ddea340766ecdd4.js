(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{8934:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/market/[item_id]",function(){return s(8495)}])},6887:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var l=s(1527);function n(e){let{show:t=!0,absolute:s=!0}=e;return(0,l.jsxs)("div",{className:"".concat(t?"":"hidden"," ").concat(s?"absolute":"relative"," w-full h-full"),children:[(0,l.jsx)("div",{className:"absolute rounded-lg w-full h-full bg-opacity-[0.1] blur-md bg-black backdrop-blur-sm"}),(0,l.jsx)("span",{className:"absolute loader w-9 h-9 m-auto top-0 left-0 right-0 bottom-0"})]})}},2534:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var l=s(1527),n=s(8786),i=s(959),r=s(8823),a=s.n(r),c=s(1689),o=s(5806),d=s(5496);function u(e){let t=(0,c.useRouter)(),s=(0,o.v9)(d.O1),[r,u]=(0,i.useState)([]),[h,x]=(0,i.useState)(!1),[m,f]=(0,i.useState)("");return(0,i.useEffect)(()=>{},[e]),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{onFocus:()=>{x(!0)},onBlur:()=>{x(!1)},children:[(0,l.jsx)("input",{autoComplete:"off",type:"text",id:"search_input",className:"px-5 font-body h-14 bg-primary w-full outline-none focus:outline-none placeholder:text-gray-200 text-gray-200 text-base rounded-lg block p-2.5",placeholder:"Search item",value:m,onChange:function(e){f(e.target.value);let t=(0,n.fy)(s,e.target.value,15);u((0,n.L)(t))}}),h&&r.length>0&&(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)("div",{id:"search_result",className:"{searchResultVisible} bg-primary absolute max-h-80 rounded-xl overflow-y-auto mt-2 p-2 w-full z-50 text-white",children:(0,l.jsx)("ul",{children:r.map(e=>(0,l.jsx)("li",{onMouseDown:()=>{f(e.en),t.push("/market/".concat(e._id))},className:"group h-auto cursor-pointer font-body font-bold text-gray-300",children:(0,l.jsxs)("div",{className:"flex m-auto group-hover:bg-higlight-1 py-2 rounded-lg",children:[(0,l.jsx)(a(),{src:(0,n.FO)(e._id),alt:e.en,width:40,height:40,className:"ml-3 w-10 h-10"}),(0,l.jsx)("div",{className:"flex-1 h-full ml-3 my-auto group-hover:text-white",children:e.en})]})},e._id))})})})]})})}},1686:function(e,t,s){"use strict";function l(e){return e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0})}s.d(t,{t:function(){return l}})},927:function(e,t,s){"use strict";function l(e,t){var s=e.filter(e=>e.id===t);return s.length>0?s[0]:null}s.d(t,{f:function(){return l}})},8495:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return v},default:function(){return b}});var l=s(1527),n=s(6887),i=s(2534),r=s(1686);function a(e){let{title:t,item:s,color:n}=e;return(0,l.jsxs)("div",{className:"h-100 mt-3 p-4 rounded-lg bg-primary",children:[(0,l.jsx)("h1",{className:"text-gray-300 font-body",children:t}),(0,l.jsx)("h1",{className:"".concat(n," font-body font-black text-xl mt-2"),children:null!=s?(0,r.t)(s.pricePerUnit):"-"}),null!=s&&(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("span",{className:"flex-auto text-summary font-body font-[0]",children:[s.quantity," Unit",s.quantity>1?"s":""]}),(0,l.jsx)("span",{className:"flex-auto font-body font-semibold text-lg text-gray-400 text-right",children:s.worldName})]})]})}function c(e){let t=null;for(let s of e)(null===t||s.pricePerUnit<t.pricePerUnit)&&(t=s);return t}function o(e){let t=null;for(let s of e)(null===t||s.pricePerUnit>t.pricePerUnit)&&(t=s);return t}var d=s(959),u=s(5806),h=s(927),x=s(9353),m=s(2931);function f(e){let{listings:t=[]}=e,s=(0,u.v9)(x.Pd),n=(0,u.v9)(m.xt),[i,a]=(0,d.useState)(!1),[o,f]=(0,d.useState)([]),p="text-white font-medium rounded-lg text-sm px-5 py-2.5 bordered-active-1",g="py-2.5 px-5 text-sm font-medium text-gray-400 rounded-lg bordered-hover-1 hover:text-white",j=(0,d.useCallback)((e,s)=>t.filter(t=>t.worldName===e&&t.hq===s),[t]),y=(0,d.useCallback)(()=>{var e,l={nq:[],hq:[]};return t.length<=0||((null!==(e=s.worlds)&&void 0!==e?e:[]).forEach(e=>{var t=(0,h.f)(n,e),s=j(t.name,!1),i=j(t.name,!0);s.length>0&&l.nq.push(c(s)),i.length>0&&l.hq.push(c(i))}),l.nq.sort((e,t)=>e.pricePerUnit-t.pricePerUnit),l.hq.sort((e,t)=>e.pricePerUnit-t.pricePerUnit)),l},[n,j,t.length,s.worlds]);return(0,d.useEffect)(()=>{if(t.length<=0)return;let e=y();f(i?e.hq:e.nq)},[i,t.length,y]),(0,l.jsxs)("div",{className:"relative shadow-md sm:rounded-lg",children:[(0,l.jsx)("button",{onClick:()=>a(!1),type:"button",className:"".concat(i?g:p),children:"Normal Quality"}),(0,l.jsx)("button",{onClick:()=>a(!0),type:"button",className:"".concat(i?p:g," ml-3"),children:"High Quality"}),(0,l.jsxs)("table",{className:"w-full font-display text-sm text-left text-gray-300",children:[(0,l.jsx)("thead",{className:"bg-item text-sm font-body uppercase text-gray-400",children:(0,l.jsxs)("tr",{children:[(0,l.jsxs)("th",{scope:"col",className:"px-6 py-3",children:[" ","World"," "]}),(0,l.jsxs)("th",{scope:"col",className:"px-6 py-3",children:[" ","Price"," "]}),(0,l.jsxs)("th",{scope:"col",className:"px-6 py-3",children:[" ","Quantity"," "]}),(0,l.jsxs)("th",{scope:"col",className:"px-6 py-3",children:[" ","Quality"," "]})]})}),(0,l.jsx)("tbody",{className:"font-body",children:o.map(e=>(0,l.jsxs)("tr",{className:"bg-primary text-base border-b border-gray-700 hover:bg-item",children:[(0,l.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap text-white",children:e.worldName}),(0,l.jsx)("td",{className:"px-6 py-4 text-yellow-200",children:(0,r.t)(e.pricePerUnit)}),(0,l.jsxs)("td",{className:"px-6 py-4",children:[" ",e.quantity," "]}),(0,l.jsx)("td",{className:"px-6 py-4",children:!0===e.hq?"High":"Normal"})]},e.worldName))})]}),o.length<=0&&(0,l.jsx)("div",{className:"bg-item text-sm font-body uppercase text-gray-400 py-3",children:(0,l.jsx)("h1",{className:"font-body font-semibold text-base text-center",children:"No Item Found."})})]})}function p(e,t){return e.filter(e=>Object.entries(t).every(t=>{let[s,l]=t;return e[s]===l}))}var g=s(8786),j=s(7647),y=s(8823),N=s.n(y),w=s(1689),v=!0;function b(e){let{item:t}=e,s=(0,w.useRouter)(),r=(0,u.v9)(x.Pd),c=s.query.item_id,[o,h]=(0,d.useState)(!0),[{listings:m,nqLowest:p,nqHighest:j,hqLowest:y,hqHighest:v},b]=(0,d.useState)({});function k(e,t){null!=e&&(h(!0),_(e,t).then(e=>{b(e),h(!1)}).catch(()=>{}))}return(0,d.useEffect)(()=>{k(r.name,c)},[r,c]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"grid grid-cols-12 gap-y-6 gap-x-4",children:[(0,l.jsxs)("div",{className:"col-span-12 2xl:col-span-9 flex items-center",children:[(0,l.jsx)("div",{className:"relative h-[6rem] w-[6rem] min-h-[6rem] min-w-[6rem]",children:(0,l.jsx)(N(),{className:"w-full h-full",width:96,height:96,src:(0,g.FO)(t.id),onError:"this.src='/img/error.png';",alt:t.Name})}),(0,l.jsxs)("div",{className:"ml-5 font-display",children:[(0,l.jsx)("h1",{className:"text-white text-4xl font-black",children:t.Name}),(0,l.jsx)("h1",{className:"text-gray-400 text-lg font-black",children:null!==t.Description?t.Description:""})]})]}),(0,l.jsx)("div",{className:"col-span-12 2xl:col-span-3 px-2 w-full h-[3.7rem] items-center justify-center",children:(0,l.jsx)("div",{className:"w-full h-full flex items-center",children:(0,l.jsx)(i.Z,{})})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-12 gap-x-8 mt-6",children:[(0,l.jsxs)("div",{className:"col-span-12 2xl:col-span-4",children:[(0,l.jsx)("h1",{className:"text-white w-full text-2xl font-[700] text-center",children:r.name}),(0,l.jsxs)("div",{className:"h-100 mt-4 p-5 w-full max-w-full items-center justify-center rounded-2xl bg-item",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("h1",{className:"text-white font-display text-2xl font-bold",children:"Lowest Price"}),(0,l.jsxs)("svg",{onClick:()=>k(r.name,c),className:"".concat(o?"animate-spin":""," text-white select-none cursor-pointer text-3xl font-black"),xmlns:"http://www.w3.org/2000/svg",height:"30",width:"30",viewBox:"0 0 24 24",fill:"white",children:[(0,l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{stroke:"white",strokeWidth:"1",d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(n.Z,{show:o}),(0,l.jsx)(a,{item:p,title:"Normal Quality",color:"text-money"}),(0,l.jsx)(a,{item:y,title:"High Quality",color:"text-money"})]})]}),(0,l.jsxs)("div",{className:"h-100 p-5 w-full max-w-full items-center justify-center rounded-2xl bg-item mt-6",children:[(0,l.jsx)("h1",{className:"text-white font-display text-2xl font-bold",children:"Highest Price"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(n.Z,{show:o}),(0,l.jsx)(a,{item:j,title:"Normal Quality",color:"text-money2"}),(0,l.jsx)(a,{item:v,title:"High Quality",color:"text-money2"})]})]})]}),(0,l.jsxs)("div",{className:"col-span-12 2xl:col-span-8",children:[(0,l.jsx)("h1",{className:"text-white w-full text-2xl font-[700] text-center",children:"\xa0"}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(f,{listings:m})})]})]})]})}async function _(e,t){let s=await (0,j.Z)("https://universalis.app/api/".concat(e,"/").concat(t,"?entries=1800&fields=").concat("listings.pricePerUnit,listings.hq,listings.quantity,listings.worldName")),l=s.data,n=l.listings,i=p(n,{hq:!0}),r=p(n,{hq:!1}),a=c(i),d=c(r),u=o(i),h=o(r);return{listings:n,nqLowest:d,nqHighest:h,hqLowest:a,hqHighest:u}}}},function(e){e.O(0,[823,786,774,888,179],function(){return e(e.s=8934)}),_N_E=e.O()}]);